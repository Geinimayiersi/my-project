{"remainingRequest":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue?vue&type=style&index=0&id=1a6f731a&scoped=true&lang=css","dependencies":[{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue","mtime":1564998607979},{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"D:\\A1\\第四阶段\\1vue\\vue_ui\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/*1:商品项目设置弹性布局*/\r\n.cart-item{\r\n  /*商品项目设置弹性布局*/\r\n  display:flex;\r\n  /*子元素两端对齐*/\r\n  justify-content: space-between;\r\n  /*垂直居中*/\r\n  align-items: center;\r\n  /*底部边框*/\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n/*2:左侧图片与文字*/\r\n.leftImgText{\r\n  display:flex;/*子元素水平对齐*/\r\n  align-items: center;/* 垂直居中*/\r\n}\r\n/*3：单独修改图片宽度和高度*/\r\n.leftImgText img{\r\n  width:50px;\r\n  height:50px;\r\n}\r\n/*4:商品价格*/\r\n.price{\r\n  margin-left: 25px;\r\n  color:red;\r\n}\r\n\r\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n    <!-- cart.vue 购物车组件 -->\r\n    <!-- <h1>cart.vue</h1> -->\r\n    <!-- （1）顶部按钮：全选 -->\r\n    <div class=\"selectAll\">\r\n      全选：<input type=\"checkbox\" @change=\"selectAll\"/>\r\n    </div>\r\n    <!-- （2）：购物车商品信息 -->\r\n    <div class=\"cart-item\" v-for=\"(item,i) of list\" :key=\"i\">\r\n      <div class=\"leftImgText\">\r\n        <input type=\"checkbox\" v-model=\"item.cb\" />\r\n        <img :src=\"'http://127.0.0.1:3000/'+item.img_url\" />\r\n        <div class=\"lname\">{{item.lname}}</div>\r\n        <div class=\"price\">￥{{item.price}}</div>\r\n      </div>\r\n      <mt-button @click=\"delItem\" :data-id=\"item.id\">删除</mt-button>\r\n    </div>\r\n    <!-- （3）：按钮删除选中商品 -->\r\n\r\n    <!-- 合计 -->\r\n    <div class=\"\" style=\"color:red\">\r\n      <span>{{$store.getters.getCartCount}}</span>\r\n      <mt-button @click=\"delMitem\">删除选中商品</mt-button>\r\n      小计：<span></span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      //购物车列表\r\n      list:[]\r\n    }\r\n  },\r\n  methods:{\r\n    selectAll(e){\r\n      //全选按钮处理函数\r\n      // 1：获取全选按钮状态\r\n      var cb=e.target.checked;\r\n      // console.log(cb);\r\n      // 2：创建循环遍历购物车数组\r\n      for(var item of this.list){\r\n        // 3：将全选状态赋值购物车商品选中状态\r\n        //item.cb 商品状态=cb全选按钮状态\r\n        item.cb=cb;\r\n      }\r\n    },\r\n    delMitem(){\r\n      //功能：删除多个购物车中指定商品\r\n      //1：创建变量保存多个购物车中id值\r\n      var str=\"\";\r\n      //2：创建循环遍历数组获取状态为true为id值\r\n      for(var item of this.list){\r\n        if(item.cb){ //true 当前商品被选中\r\n          str+=item.id+\",\"\r\n        }\r\n      }\r\n      //2.1:判断用户是否选中了商品\r\n      if(str.length==0){\r\n        //2.2如果没有选中商品，显示确认消息\r\n        this.$messagebox(\"请选择要删除的商品\");\r\n        return; //停止往后执行\r\n      }\r\n\r\n      //3：截取字符串中最后，\r\n      //substring截取字符串\r\n      str = str.substring(0,str.length-1);\r\n      //console.log(str);\r\n      //4：显示交互提示框，再次请用户确认操作\r\n      this.$messagebox.confirm(\"是否删除数据？\").then(res=>{\r\n        var url=\"delM\";\r\n        //参数名ids：值  拼接的字符串\r\n        var ids={ids:str};\r\n        //发送ajax请求\r\n        this.axios.get(url,{params:ids}).then(res=>{\r\n          //删除多个商品执行成功，加载新购物车列表\r\n          this.loadMore();\r\n          //提示用户删除成功\r\n          this.$toast(\"删除成功\");\r\n        })\r\n      }).catch(err=>{\r\n        console.log(err);//打印错误\r\n      })\r\n\r\n      //5：发送ajax请求删除多个数据\r\n      //6：提示用户删除成功\r\n        //7：重新加载购物车中数据\r\n    },\r\n    delItem(e){ \r\n     //功能:删除购物车中指定商品\r\n     //-获取购物车id\r\n     var id=e.target.dataset.id;\r\n    //  console.log(id);\r\n     //-交互提示用户是否删除指定商品\r\n     this.$messagebox.confirm(\"是否删除指定商品\").then(res=>{\r\n       //-同意\r\n      //-发送ajax 服务器端程序 ?id=id\r\n      var url=\"del\";  //请求服务器地址\r\n      var obj={id:id};    //请求服务器时发送参数\r\n     //-返回服务器返回内容\r\n        this.axios.get(url,{params:obj}).then(\r\n          res=>{\r\n            if(res.data.code>0){\r\n              this.$toast(\"删除成功\");  //删除成功提示消息\r\n            //-重新调用 loadMore() 最新购物列表查询\r\n              this.loadMore();   //重新调用加载购物车数据\r\n            }\r\n          }\r\n        )\r\n     })\r\n\r\n    },\r\n    loadMore(){\r\n      //功能：加载购物车中的数据\r\n      //当组建创建成功后调用\r\n      // console.log(132123123);\r\n      //1:发送请求cart\r\n      var url= \"cart\";\r\n      this.axios.get(url).then(res=>{\r\n        // console.log(res);\r\n      //2:获取返回结果\r\n        if(res.data.code==-1){\r\n          //3：如果用户没有执行登录操作\r\n          this.$messagebox(\"消息\",\"请登录\").then(res=>{\r\n            //提示交互提示/跳转登录组件\r\n            this.$router.push(\"/Login\");\r\n            return;//停止执行\r\n          });\r\n        }else{\r\n          //4:获取数据成功\r\n          var list=res.data.data;\r\n          //4.1 创建循环遍历数组并且为每个元素添加cb属性表示，商品前复选框状态\r\n          // !!!!!######加载之前先清空\r\n          this.$store.commit(\"clear\");\r\n          //注意先添加cd属性在赋值list 顺序\r\n          for(var item of list){\r\n            //4.11 添加cb属性表示状态\r\n            item.cb=false;\r\n            //4.12 修改共享购物车中数量值 vuex\r\n            this.$store.commit(\"increment\")\r\n          }\r\n          \r\n\r\n          //5:保存购物车数据\r\n          this.list=list;\r\n          // console.log(list);\r\n        }\r\n      })\r\n      //4：回去数据成功\r\n    }\r\n  },\r\n  created(){\r\n    this.loadMore();\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n/*1:商品项目设置弹性布局*/\r\n.cart-item{\r\n  /*商品项目设置弹性布局*/\r\n  display:flex;\r\n  /*子元素两端对齐*/\r\n  justify-content: space-between;\r\n  /*垂直居中*/\r\n  align-items: center;\r\n  /*底部边框*/\r\n  border-bottom: 1px solid #ccc;\r\n}\r\n/*2:左侧图片与文字*/\r\n.leftImgText{\r\n  display:flex;/*子元素水平对齐*/\r\n  align-items: center;/* 垂直居中*/\r\n}\r\n/*3：单独修改图片宽度和高度*/\r\n.leftImgText img{\r\n  width:50px;\r\n  height:50px;\r\n}\r\n/*4:商品价格*/\r\n.price{\r\n  margin-left: 25px;\r\n  color:red;\r\n}\r\n\r\n</style>\r\n"]}]}